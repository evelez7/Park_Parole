<!--==============================================================================================
**************************************************************************************************
*Author: Kevin Paredes
*Class: CSC 648
*Date Updated: 7/30/2019
Description: This page diesplays the result from the search bar function. The page also contains 
a navigation bar, logo, and disclaimer.
**************************************************************************************************
(Used for local rendering)
<link href="/application/src/public/stylesheets/style.css" rel="stylesheet" />
<link href="/stylesheets/style.css" rel="stylesheet" />
================================================================================================-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>RESULT</title>
<!--    <link href="../public/stylesheets/style.css" rel="stylesheet" />-->
<link href="/stylesheets/style.css" rel="stylesheet" />
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <!--- old script -->
<!--
    <script>
        $(document).ready(function() {
            <% for (var i = 0; i < searchResult.length; i++) { %>
                    document.getElementById('result').innerHTML += '<p> Issue Category: <%= searchResult[i]['Category'] %><br>Description: <%= searchResult[i]['Description'] %> </p>'
                    document.getElementById('result').innerHTML += '<p>Date: <%= searchResult[i]['Date'] %><br>Location: <%= searchResult[i]['Location'] %> </p>'
                    <% } %>
            });
    </script>
-->
    <!--- end of old script -->
    <script>
        $(document).ready(function() {
            <% for (var i = 0; i < searchResult.length; i++) { %>
                    /* start here -*/
                    document.getElementById('result').innerHTML += '<div class="resultCard">
                <div class="result-col-1">
                    <div class="resultCategoryRow">
                        Category: <%= searchResult[i]['Category'] %>      
                    </div>
                    <div class="resultDateRow">
                        date: <%= searchResult[i]['Date'] %>
                    </div>
                    <div class="resultLocationRow">
                        location: <%= searchResult[i]['Location'] %>
                    </div>
                </div>
                <div class="result-col-2">
                    Description: <%= searchResult[i]['Description'] %>
                </div>         
            </div>'
                    /* end here -*/                                          
                    <% } %>
            });
    </script>
    <!--- old script -->
<!--    <script src="../public/scripts/render.js"></script>-->
    <!--- end of old script -->
<!--==============================================================================================
**************************************************************************************************
*Author: Jackie Shan
*Class: CSC 648
*Date Updated: 7/30/2019
*Description: This logo was designed by Hector. When clicked it routes to the home page. 
**************************************************************************************************
================================================================================================-->
<div class="logo-img">
        <a href="/"><img src="../public/images/Logo648.png" alt="" class="logo"></a>
</div>
<!--==============================================================================================
**************************************************************************************************
*Author: Kevin Paredes
*Class: CSC 648
*Date Updated: 7/30/2019
*Description: The disclaimer class shows a stament that prevents confusion for possible users due 
that this is only a school project and not a real envairmental website.
**************************************************************************************************
================================================================================================-->
    <div class="disclaimer">
        <h6>
            â€œSFSU Software Engeneering Project CSC 648-848,
            <br> Summer 2019. For Demostration Only."
        </h6>
        </div>
    </div>
<!--==============================================================================================
**************************************************************************************************    
*Author: Kevin Paredes
*Class: CSC 648
*Date Updated: 8/01/2019
*Description: The navBar class displays a navigation bar that contains links to ABOUT, POST, LOG IN, 
SIGN UP, and a search bar with categories and a button.
**************************************************************************************************
================================================================================================-->      
    <div class="navBar">
        <a class="active" href="about">About</a>
        <a href="post">Post</a>
        <a href="contact">Contact</a>
        <div class="navBar" id="rightSide">
            <a href="logIn">Log In</a>
            <a href="signUp">Sign Up</a>
        </div>
        <div class="navBar" id="search">
            <form method="post" action="/">
                <input id="search" name="search" placeholder="Search.." type="text" value="">
                <select name="category" id="dropDownNavBar" onchange="this.form.submit()">
                    <option value="">All Categories</option>
                    <option value="Category1" <% if (category == "Category1") { %> selected <% } %> >Fire</option>
                    <option value="Category2" <% if (category == "Category2") { %> selected <% } %> >Oil spill</option>
                    <option value="Category3" <% if (category == "Category3") { %> selected <% } %> >Waste Managment</option>
                </select>
                <button type="submit" id="searchButton">Search</button>
            </form>
        </div>
    </div>
</head>
<body>
<!--==============================================================================================
**************************************************************************************************
*Author: Kevin Paredes
*Class: CSC 648
*Date Updated: 7/30/2019
Description: This class displays a container for the result from the search fuction. 
**************************************************************************************************
================================================================================================-->

   <div class="resultContainer">
        <div id="result">
            <div id="resultTitle">Number of results: <span id="resultCounter"></span></div>
            <h4 id="resultTitle">Search Results:</h4>
            
            <div class="resultCard">
                <div class="result-col-1">
                    <div class="resultCategoryRow">
                        Category: fire      
                    </div>
                    <div class="resultDateRow">
                        date: 8/10/2019
                    </div>
                    <div class="resultLocationRow">
                        location: sunset park
                    </div>
                </div>
                <div class="result-col-2">
                    Description: There is a big fire
                </div>         
            </div>
            
        </div>
        <div id="resultMap">
            <h4>Google Map Here:</h4>
            <script>
            var map, infoWindow;
            function initMap() {
                map = new google.maps.Map(document.getElementById('resultMap'), {
                    center: {
                        lat: 37.773972,
                        lng: -122.431297
                    },
                    zoom: 12
                });
                infoWindow = new google.maps.InfoWindow;
                // HTML5 geolocation.
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(function(position) {
                        var pos = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude
                        };
                        infoWindow.setPosition(pos);
                        infoWindow.setContent('Current Location.');
                        infoWindow.open(map);
                        map.setCenter(pos);
                        var marker = new google.maps.Marker({
                            position: pos,
                            map: map,
                        })
                    }, function() {
                        handleLocationError(true, infoWindow, map.getCenter());
                    });
                } else {
                    // Browser doesn't support Geolocation
                    handleLocationError(false, infoWindow, map.getCenter());
                }
            }
            function handleLocationError(browserHasGeolocation, infoWindow, pos) {
                infoWindow.setPosition(pos);
                infoWindow.setContent(browserHasGeolocation ?
                    'Geolocation not allowed' :
                    'Error: Your browser doesn\'t support geolocation.');
                infoWindow.open(map);
            }
        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCz0xeLyqgYCgChd_cu1TroCXMgCmpr_NU&callback=initMap" async defer></script>    
        </div>
    </div>
</body>
</html>
<!--==============================================================================================
**************************************************************************************************
*Author: "Empty Template for comments"
*Class:
*Date Updated:
*Description:
**************************************************************************************************
================================================================================================-->